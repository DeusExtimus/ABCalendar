{"version":3,"file":"abcalendar.js","sources":["../../../projects/abcalendar-lib/src/lib/abcalendar-lib.service.ts","../../../projects/abcalendar-lib/src/lib/abcalendar-lib.component.ts","../../../projects/abcalendar-lib/src/lib/calendar/calendar.component.ts","../../../projects/abcalendar-lib/src/lib/abcalendar-lib.module.ts","../../../projects/abcalendar-lib/src/public-api.ts","../../../projects/abcalendar-lib/src/abcalendar.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AbcalendarLibService {\n\n  constructor() { }\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {Item, Local} from './calendar/calendar.component';\n\n@Component({\n  selector: 'lib-abcalendar-lib',\n  template: `\n    <lib-calendar\n      [views]=\"views\"\n      [initialView]=\"initialView\"\n      [initialDate]=\"initialDate\"\n      [events]=\"events\"\n      (eventClick)=\"setEvent($event)\"\n      [localeValue]=\"localeValue\"\n    ></lib-calendar>\n  `,\n  styles: []\n})\nexport class AbcalendarLibComponent implements OnInit {\n\n  constructor() {\n  }\n\n  @Input()\n  initialView: string;\n  @Input()\n  initialDate: Date;\n  @Input()\n  events: Item[];\n  @Input()\n  views: string[];\n  @Input()\n  localeValue: Local;\n\n  @Output()\n  eventEmitter = new EventEmitter<Item>();\n\n  ngOnInit(): void {\n  }\n\n  setEvent($event: Item): void {\n    this.eventEmitter.emit($event);\n  }\n}\n","import {Component, Input, OnInit, Output, EventEmitter, Injectable} from '@angular/core';\n\n@Component({\n  selector: 'lib-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.css']\n})\n\n@Injectable({providedIn: 'root'})\nexport class CalendarComponent implements OnInit {\n\n  @Input()\n  initialView: string;\n  @Input()\n  initialDate: Date;\n  @Input()\n  events: Item[];\n  @Input()\n  views: string[];\n\n  @Input()\n  localeValue: Local;\n\n  @Output()\n  eventClick = new EventEmitter<Item>();\n\n  today: Date = new Date(Date.now());\n  year: number;\n  month: number;\n  day: number;\n\n  yBtn = false;\n  mBtn = false;\n  wBtn = false;\n  dBtn = false;\n\n  itemCounter: number;\n\n  defLocales = {\n    localeEn: {\n      weekdays: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\n      months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n      others: ['Year', 'Week', 'Month', 'Day', 'Today', 'All Day'],\n      lang: null\n    },\n    localeDe: {\n      weekdays: ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'],\n      months: ['Januar', 'Februar', 'Mrz', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'OKtober', 'November', 'Dezember'],\n      others: ['Jahr', 'Woche', 'Monat', 'Tag', 'Heute', 'Ganztägig'],\n      lang: null\n    }\n  };\n\n  private static setMonthAndDayFormat(day: number, month: number): string[] {\n    const monthAndDay: string[] = [' ', ' '];\n    // day\n    if (day < 10) {\n      monthAndDay[0] = `0${day}`;\n    } else {\n      monthAndDay[0] = day.toString();\n    }\n    // month\n    if (month < 10) {\n      monthAndDay[1] = `0${month}`;\n    } else {\n      monthAndDay[1] = month.toString();\n    }\n    return monthAndDay;\n  }\n\n  ngOnInit(): void {\n    this.setInitialView();\n    this.setInitialDate();\n    this.checkEvents();\n    this.prepareButtons();\n    this.setLocaleForCalendar();\n  }\n\n  getMonthsForLocale(locale): string[] {\n    const format = new Intl.DateTimeFormat(locale, {month: 'long'});\n    const months = [];\n    for (let month = 0; month < 12; month++) {\n      const dateToFormat = new Date(Date.UTC(2000, month, 1, 0, 0, 0));\n      months.push(format.format(dateToFormat));\n    }\n    return months;\n  }\n\n  getWeekdaysForLocale(locale): string[] {\n    const format = new Intl.DateTimeFormat(locale, {weekday: 'long'});\n    const weekdays = [];\n    for (let weekday = 0; weekday < 6; weekday++) {\n      const dateToFormat = new Date(Date.UTC(2000, weekday, 1, 0, 0, 0));\n      weekdays.push(format.format(dateToFormat));\n    }\n    return weekdays;\n  }\n\n  numSequence(n: number): Array<number> {\n    return Array(n);\n  }\n\n  getDaysOfMonth(f?: number): number {\n    let firstDay: Date;\n    if (f == null) {\n      firstDay = new Date(this.year, this.month + 1, 0);\n    } else {\n      firstDay = new Date(this.year, f + 1, 0);\n    }\n    return firstDay.getDate();\n  }\n\n  getEmptyStartDays(f?: number): number {\n    let firstDay: Date;\n    if (f == null) {\n      firstDay = new Date(this.year, this.month, 1);\n    } else {\n      firstDay = new Date(this.year, f, 1);\n    }\n    switch (firstDay.getDay()) {\n      case 0:\n        return 6;\n      case 1:\n        return 0;\n      case 2:\n        return 1;\n      case 3:\n        return 2;\n      case 4:\n        return 3;\n      case 5:\n        return 4;\n      case 6:\n        return 5;\n    }\n  }\n\n  getEmptyEndDays(f?: number): number {\n    const daysOfMonth = this.getDaysOfMonth(f);\n    const getEmptyStartDay = this.getEmptyStartDays(f);\n    return 42 - daysOfMonth - getEmptyStartDay;\n  }\n\n  prev(): void {\n    if (this.initialView === 'year') {\n      this.year--;\n    } else if (this.initialView === 'month') {\n      if (this.month > 0) {\n        this.month--;\n      } else {\n        this.month = 11;\n        this.year--;\n      }\n    } else if (this.initialView === 'week') {\n      if (this.day - 7 < 0) {\n        this.day = this.getDaysOfMonth(this.month - 1) + (this.day - 7);\n        if (this.month === 0) {\n          this.month = 11;\n          this.year--;\n        } else {\n          this.month--;\n        }\n      } else {\n        this.day = this.day - 7;\n      }\n    } else {\n      if (this.day > 1) {\n        this.day--;\n      } else {\n        this.month--;\n        this.day = this.getDaysOfMonth(this.month);\n        if (this.month === 0) {\n          this.day = 31;\n          this.month = 11;\n          this.year--;\n        }\n      }\n    }\n  }\n\n  currentDay(): void {\n    this.year = this.today.getFullYear();\n    this.month = this.today.getMonth();\n    this.day = this.today.getDate();\n  }\n\n  next(): void {\n    if (this.initialView === 'year') {\n      this.year++;\n    } else if (this.initialView === 'month') {\n      if (this.month < 11) {\n        this.month++;\n      } else {\n        this.month = 0;\n        this.year++;\n      }\n    } else if (this.initialView === 'week') {\n      if (this.day + 7 > this.getDaysOfMonth(this.month)) {\n        this.day = this.day + 7 - this.getDaysOfMonth(this.month);\n        if (this.month === 11) {\n          this.month = 0;\n          this.year++;\n        } else {\n          this.month++;\n        }\n      } else {\n        this.day = this.day + 7;\n      }\n    } else {\n      if (this.day < this.getDaysOfMonth(this.month) - 1) {\n        this.day++;\n      } else {\n        this.day = 1;\n        if (this.month < 11) {\n          this.month++;\n        } else {\n          this.month = 0;\n          this.year++;\n        }\n      }\n    }\n  }\n\n  setTitle(): string {\n    switch (this.initialView) {\n      case 'year':\n        return this.year.toString();\n      case 'month':\n        return `${this.localeValue.months[this.month]} ${this.year.toString()}`;\n      case 'week':\n        const wholeWeek = this.getWholeWeek();\n        const startDate = new Date(this.year, this.month, this.day - wholeWeek[0]);\n        const endDate = new Date(this.year, this.month, this.day + wholeWeek[1]);\n        const formattedStartDate = CalendarComponent.setMonthAndDayFormat(startDate.getDate() + 1, startDate.getMonth() + 1);\n        const formattedEndDate = CalendarComponent.setMonthAndDayFormat(endDate.getDate() + 1, endDate.getMonth() + 1);\n        const startDay = `${formattedStartDate[0]}.${formattedStartDate[1]}`;\n        const endDay = `${formattedEndDate[0]}.${formattedEndDate[1]}.${endDate.getFullYear()}`;\n        return `${startDay} - ${endDay}`;\n      case 'day':\n        const formattedDate = CalendarComponent.setMonthAndDayFormat(this.day, this.month + 1);\n        return `${formattedDate[0]}.${formattedDate[1]}.${this.year}`;\n    }\n  }\n\n  getItemColor(item: Item): string {\n    if (item.color == null || !item.color.match(/^#([0-9a-f]{3}){1,2}$/i)) {\n      return '#e7e2e2';\n    } else {\n      return item.color;\n    }\n  }\n\n  getTextColor(backgroundColor: string): string {\n    const r = parseInt(backgroundColor.substring(1, 3), 16);\n    const g = parseInt(backgroundColor.substring(3, 5), 16);\n    const b = parseInt(backgroundColor.substring(5, 7), 16);\n    const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n    return luminance > 0.5 ? '#000000' : '#FFFFFF';\n  }\n\n  correctDate(item: Item, day: number, month?: number): boolean {\n    if (month == null) {\n      month = this.month;\n    }\n    const dateToCheck = new Date(this.year, month, day + 1, 1, 0, 0, 0);\n    const itemDate = new Date(item.dateOfExpiry);\n    const isCurrentDate =\n      itemDate.getFullYear() === dateToCheck.getFullYear() &&\n      itemDate.getMonth() === dateToCheck.getMonth() &&\n      dateToCheck.getDate() === itemDate.getDate();\n    if (isCurrentDate) {\n      this.itemCounter++;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  isToLate(): boolean {\n    return this.itemCounter <= 3;\n  }\n\n  colorOfTheDay(dayNumber: number, rightMonth?: number): string {\n    let a;\n    if (rightMonth == null) {\n      a = Date.UTC(this.year, new Date(Date.now()).getMonth(), dayNumber + 1);\n    } else {\n      a = Date.UTC(this.year, rightMonth, dayNumber + 1);\n    }\n    const b = Date.UTC(this.year, this.month, this.today.getDate());\n    if (a === b) {\n      return '#ececf5';\n    }\n  }\n\n  getHoursOfDay(hours: number): string {\n    if (hours >= 10) {\n      return hours.toString();\n    } else {\n      return `0${hours}`;\n    }\n  }\n\n  isAllDayItem(item: Item): boolean {\n    return new Date(item.dateOfExpiry).getDate() === this.day;\n  }\n\n  getDatesOfWeek(indexDay: number): number {\n    const startDate = new Date(this.year, this.month, this.day - this.getWholeWeek()[0]);\n    return startDate.getDate() + indexDay;\n  }\n\n  resetCounter(): void {\n    this.itemCounter = 0;\n  }\n\n  private setInitialView(): void {\n    if (this.initialView == null) {\n      this.initialView = 'month';\n    }\n  }\n\n  private setInitialDate(): void {\n    let date: Date;\n    if (this.initialDate == null) {\n      date = new Date(Date.now());\n    } else {\n      date = this.initialDate;\n    }\n    this.year = date.getFullYear();\n    this.month = date.getMonth();\n    this.day = date.getDate();\n  }\n\n  private checkEvents(): void {\n    if (this.events === null) {\n      console.log('NO EVENTS');\n    }\n  }\n\n  private getWholeWeek(): number[] {\n    switch (new Date(this.year, this.month, this.day + 1).getDay()) {\n      case 0:\n        return [6, 0];\n      case 1:\n        return [0, 6];\n      case 2:\n        return [1, 5];\n      case 3:\n        return [2, 4];\n      case 4:\n        return [3, 3];\n      case 5:\n        return [4, 2];\n      case 6:\n        return [5, 1];\n    }\n  }\n\n  private prepareButtons(): void {\n    if (this.views == null) {\n      this.mBtn = true;\n      this.wBtn = true;\n      this.dBtn = true;\n      this.yBtn = true;\n    } else {\n      for (const btn of this.views) {\n        switch (btn) {\n          case 'year': {\n            this.yBtn = true;\n            break;\n          }\n          case 'month': {\n            this.mBtn = true;\n            break;\n          }\n          case 'week': {\n            this.wBtn = true;\n            break;\n          }\n          case 'day': {\n            this.dBtn = true;\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  private setLocaleForCalendar(): void {\n    if (this.localeValue == null) {\n      this.localeValue = this.defLocales.localeEn;\n    } else if (this.localeValue.lang === 'en-En' || this.localeValue.lang === 'en-US') {\n      this.localeValue = this.defLocales.localeEn;\n    } else if ('de-De') {\n      this.localeValue = this.defLocales.localeDe;\n    }\n  }\n}\n\nexport class Item {\n  itemId?: number;\n  list?: List;\n  title: string;\n  color?: string;\n  dateOfExpiry: Date;\n}\n\nexport class List {\n  listId?: number;\n  item?: Item[];\n  title?: string | undefined;\n  dateOfExpiry?: Date;\n}\n\nexport class Local {\n  weekdays ?: string[];\n  months ?: string[];\n  others ?: string[];\n  lang ?: string;\n}\n","import { NgModule } from '@angular/core';\nimport { AbcalendarLibComponent } from './abcalendar-lib.component';\nimport {CalendarComponent} from './calendar/calendar.component';\nimport {CommonModule} from '@angular/common';\n\n\n\n@NgModule({\n  declarations: [AbcalendarLibComponent, CalendarComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [AbcalendarLibComponent]\n})\nexport class AbcalendarLibModule { }\n","/*\n * Public API Surface of abcalendar-lib\n */\n\nexport * from './lib/abcalendar-lib.service';\nexport * from './lib/abcalendar-lib.module';\nexport * from './lib/calendar/calendar.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {AbcalendarLibComponent as ɵa} from './lib/abcalendar-lib.component';"],"names":[],"mappings":"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"}