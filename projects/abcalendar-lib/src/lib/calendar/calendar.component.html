<div class="container-fluid" [ngClass]="{'bg-dark': theme == 'night'}">
  <div class="mx-5 text-center">
    <!--  HEADER-->
    <div class="btn-toolbar mb-2" role="toolbar">
      <!--        PREV-TODAY-NEXT-BUTTONS-->
      <div class="col-4 mt-3">
        <div class="btn-group" role="group">
          <button type="button"
                  [ngClass]="{'btn btn-dark border border-grey rounded-start': theme == 'night',
                                'btn btn-outline-dark': theme == 'light' || theme == 'dark'}"
                  (click)="prev()"><span [ngClass]="{'lg': theme == 'night'}">{{'<'}}</span>
          </button>
          <button type="button"
                  [ngClass]="{'btn btn-dark border border-grey': theme == 'night',
                                'btn btn-outline-dark': theme == 'light' || theme == 'dark'}"
                  (click)="currentDay()"><span [ngClass]="{'lg': theme == 'night'}">{{localeValue.others[4]}}</span>
          </button>
          <button type="button"
                  [ngClass]="{'btn btn-dark border border-grey rounded-end': theme == 'night',
                                'btn btn-outline-dark': theme == 'light' || theme == 'dark'}"
                  (click)="next()"><span [ngClass]="{'lg': theme == 'night'}">{{'>'}}</span>
          </button>
        </div>
      </div>
      <!--      TITLE-->
      <div class="col-4 mt-3 text-center">
        <h1 class="user-select-none" [ngClass]="{'lg': theme == 'night'}">{{setTitle()}}</h1>
      </div>
      <!--      VIEW-BUTTONS-->
      <div class="col-4 mt-3">
        <div class="btn-group" role="group">
          <button type="button"
                  [ngClass]="{'btn btn-dark border border-grey rounded-start': theme == 'night', 'btn btn-outline-dark': theme == 'light' || theme == 'dark'}"
                  (click)="setInitialView('year')"
                  *ngIf="yBtn">
            <span [ngClass]="{'lg': theme == 'night'}">{{showViewInRightLang('year')}}</span>
          </button>
          <button type="button"
                  [ngClass]="{'btn btn-dark border border-grey': theme == 'night', 'btn btn-outline-dark': theme == 'light' || theme == 'dark'}"
                  (click)="setInitialView('month')" *ngIf="mBtn">
            <span [ngClass]="{'lg': theme == 'night'}">{{showViewInRightLang('month')}}</span>
          </button>
          <button type="button"
                  [ngClass]="{'btn btn-dark border border-grey': theme == 'night', 'btn btn-outline-dark': theme == 'light' || theme == 'dark'}"
                  (click)="setInitialView('week')" *ngIf="wBtn">
            <span [ngClass]="{'lg': theme == 'night'}">{{showViewInRightLang('week')}}</span>
          </button>
          <button type="button"
                  [ngClass]="{'btn btn-dark border border-grey rounded-end': theme == 'night', 'btn btn-outline-dark': theme == 'light' || theme == 'dark'}"
                  (click)="setInitialView('day')" *ngIf="dBtn">
            <span [ngClass]="{'lg': theme == 'night'}">{{showViewInRightLang('day')}}</span>
          </button>
        </div>
      </div>
    </div>

    <!--JAHRESANSICHT-->
    <div class="row col-12" *ngIf="initialView =='year'">
      <div *ngFor="let column of numSequence(12); let monthNum = index;" class="col-4 mt-3">
        <div class="border" [ngClass]="{'bg-dark': theme == 'night'}">
          <div class="col-12 justify-content-center">
            <!--            Monthnames-->
            <div class="container-fluid text-center">
              <h5 class="user-select-none" [ngClass]="{'lg': theme == 'night'}"
                  style="font-weight: bolder">{{localeValue.months[monthNum]}}</h5>
            </div>
            <div class="row col-12 ms-0 user-select-none overflow-hidden">
              <div class="row text-center mx-0 px-0"
                   [ngClass]="{'bg-dark': theme == 'dark', 'bg-light': theme == 'light'}">
                <div *ngFor="let dayname of localeValue.weekdays" class="w-14">
                  <h5 [ngClass]="{'lg': theme == 'dark' || theme == 'night'}">
                    {{dayname}}
                  </h5>
                </div>
              </div>
              <!--              DAYS OF PREV MONTH-->
              <div *ngFor="let beforeDay of numSequence(getEmptyStartDays(monthNum)); let ac = index;"
                   class="border w-14 vh-9 lgOnHover" [ngClass]="{'gOnHover border-dg': theme == 'night'}">
              </div>
              <!--              DAYS OF CURRENT MONTH-->
              <div *ngFor="let currentDay of monthDays(monthNum)"
                   class="border text-start w-14 vh-9 lgOnHover crop"
                   [ngClass]="{'gOnHover border-dg': theme == 'night'}"
                   [ngStyle]="{'background-color': colorOfTheDay(currentDay.getDate(), monthNum)}"
                   (click)="emitDayClick(currentDay.getDate(), monthNum)">
                <div class="ms-0 user-select-none" [ngClass]="{'lg': theme == 'night'}">
                  {{getNumbersInRightLang(currentDay.getDate())}}
                </div>
                <!--                  MULTIDAY-->
                <div *ngFor="let item of rightMultiDayEvents(currentDay.getDate(), monthNum)" class="ps-0 mt-05">
                  <!--                  STARTDAY-->
                  <div
                    *ngIf="isStartDate(item, currentDay.getDate(), monthNum), else isEnd">
                    <div class="year-multi-day pointer rounded-start"
                         [ngClass]="{'border border-grey': theme == 'night',
                         'border border-dark': theme == 'light' || theme == 'dark'}"
                         [ngStyle]="{'background-color': getItemColor(item)}"
                         (click)="eventClick.emit(item)"></div>
                  </div>
                  <!--                  ENDDAY-->
                  <ng-template #isEnd>
                    <div *ngIf="isEndDate(item, currentDay.getDate(), monthNum), else isMiddle">
                      <div class="year-multi-day-end pointer ml-n10 rounded-end"
                           [ngClass]="{'border border-grey': theme == 'night',
                           'border border-dark': theme == 'light' || theme == 'dark'}"
                           [ngStyle]="{'background-color': getItemColor(item)}"
                           (click)="eventClick.emit(item)"></div>
                    </div>
                  </ng-template>
                  <!--                  MIDDLE-->
                  <ng-template #isMiddle>
                    <div *ngIf="currentDay">
                      <div class="year-multi-day pointer ml-n10"
                           [ngClass]="{'border border-grey': theme == 'night',
                           'border border-dark': theme == 'light' || theme == 'dark'}"
                           [ngStyle]="{'background-color': getItemColor(item)}"
                           (click)="eventClick.emit(item)"></div>
                    </div>
                  </ng-template>
                </div>
                <div class="row ms-0">
                  <!--                  SINGLEDAY-->
                  <div *ngFor="let item of rightSingleDayEvents(currentDay.getDate(), monthNum)" class="col-05 ps-0">
                    <div
                      *ngIf="startDayIsEndDay(item) || item.allDayItem">
                      <div class="dot crop pointer ms-0"
                           [ngClass]="{'border border-grey': theme == 'night',
                                        'border border-dark': theme == 'light' || theme == 'dark'}"
                           [ngStyle]="{'background-color': getItemColor(item)}"
                           (click)="eventClick.emit(item)"></div>
                    </div>
                  </div>
                </div>
              </div>
              <!--              DAYS OF NEXT MONTH-->
              <div *ngFor="let afterDay of daysOfNextMonth(monthNum)"
                   class="border w-14 vh-9 lg lgOnHover text-start user-select-none overflow-hidden"
                   (click)="emitDayClickAfterDays(afterDay.getDate() - 1, monthNum)"
                   [ngClass]="{'gOnHover dg border-dg': theme == 'night'}">
                <div class="ms-0 user-select-none">
                  {{afterDay.getDate()}}
                </div>
                <!--                  MULTIDAY-->
                <div *ngFor="let item of rightMultiDayEvents(afterDay.getDate(), monthNum + 1)" class="ps-0 mt-05">
                  <!--                  STARTDAY-->
                  <div
                    *ngIf="isStartDate(item, afterDay.getDate(), monthNum + 1), else isEnd">
                    <div class="year-multi-day pointer rounded-start"
                         [ngClass]="{'border border-grey': theme == 'night',
                         'border border-dark': theme == 'light' || theme == 'dark'}"
                         [ngStyle]="{'background-color': getItemColor(item)}"
                         (click)="eventClick.emit(item)"></div>
                  </div>
                  <!--                  ENDDAY-->
                  <ng-template #isEnd>
                    <div *ngIf="isEndDate(item, afterDay.getDate(), monthNum + 1), else isMiddle">
                      <div class="year-multi-day-end pointer ml-n10 rounded-end"
                           [ngClass]="{'border border-grey': theme == 'night',
                           'border border-dark': theme == 'light' || theme == 'dark'}"
                           [ngStyle]="{'background-color': getItemColor(item)}"
                           (click)="eventClick.emit(item)"></div>
                    </div>
                  </ng-template>
                  <!--                  MIDDLE-->
                  <ng-template #isMiddle>
                    <div *ngIf="currentDay">
                      <div class="year-multi-day pointer ml-n10"
                           [ngClass]="{'border border-grey': theme == 'night',
                           'border border-dark': theme == 'light' || theme == 'dark'}"
                           [ngStyle]="{'background-color': getItemColor(item)}"
                           (click)="eventClick.emit(item)"></div>
                    </div>
                  </ng-template>
                </div>
                <div class="row ms-0">
                  <!--                  SINGLEDAY-->
                  <div *ngFor="let item of rightSingleDayEvents(afterDay.getDate(), monthNum + 1)" class="col-05 ps-0">
                    <div
                      *ngIf="startDayIsEndDay(item) || item.allDayItem">
                      <div class="dot crop pointer ms-0"
                           [ngClass]="{'border border-grey': theme == 'night',
                           'border border-dark': theme == 'light' || theme == 'dark'}"
                           [ngStyle]="{'background-color': getItemColor(item)}"
                           (click)="eventClick.emit(item)"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--MONATSANSICHT-->
    <div *ngIf="initialView == 'month'">
      <div class="row">
        <!--        WEEKDAYNAMES-->
        <div class="row text-center mx-0 px-0"
             [ngClass]="{ 'bg-dark': theme == 'dark',
                          'bg-light': theme == 'light',
                          'bg-dark border border-grey':  theme == 'night'}">
          <div *ngFor="let weekdayName of localeValue.weekdays" class="w-14 user-select-none">
            <h5 [ngClass]="{'lg': theme == 'dark' || theme == 'night'}">{{weekdayName}}</h5>
          </div>
        </div>
        <!--        DAYS FOR PREV MONTH-->
        <div *ngFor="let beforeday of numSequence(getEmptyStartDays()); let ac = index;"
             class="border w-14 vh-15 lgOnHover crop user-select-none"
             [ngClass]="{'gOnHover border-dg': theme == 'night'}">
        </div>
        <!--        DAYS OF CURRENT MONTH-->
        <div *ngFor="let currentday of monthDays()"
             class="border text-start w-14 vh-15 lgOnHover overflow-hidden"
             [ngStyle]="{'background-color': colorOfTheDay(currentday.getDate())}"
             [ngClass]="{'gOnHover lg border-dg': theme == 'night'}"
             (click)="emitDayClick(currentday.getDate())">
          <!--          DAYNUMBER-->
          <div class="ms-2 user-select-none">
            {{getNumbersInRightLang(currentday.getDate())}}
          </div>
          <!--          EVENT-->
          <div *ngFor="let item of rightEvents(currentday.getDate())">
            <!--            EVENT START-->
            <div class="ms-1 crop rounded m-1 pointer"
                 *ngIf="isStartDate(item, currentday.getDate()); else isEnd"
                 (click)="eventClick.emit(item)"
                 [ngClass]="{
                 'border border-light': theme == 'night',
                 'border border-dark': theme == 'dark' || theme == 'light',
                 'max-width': item.startDate != item.endDate && !item.allDayItem
                 }"
                 [ngStyle]="{
                 'background-color': getItemColor(item),
                 'color': getTextColor(getItemColor(item))
                 }"
            >
              <div class="ms-2">
                {{item.title}}
              </div>
            </div>
            <!--            EVENT ENDING-->
            <ng-template #isEnd>
              <div class="crop rounded m-1 pointer ml-n10"
                   *ngIf="isEndDate(item, currentday.getDate()); else isNot"
                   (click)="eventClick.emit(item)"
                   [ngClass]="{
                 'border border-light': theme == 'night',
                 'border border-dark': theme == 'dark' || theme == 'light'
                 }"
                   [ngStyle]="{
                 'background-color': getItemColor(item),
                 'color': getTextColor(getItemColor(item))
                 }"
              >
                &nbsp;
              </div>
            </ng-template>
            <!--EVENT MIDDLE-->
            <ng-template #isNot>
              <div class="crop rounded m-1 pointer mx-n10"
                   *ngIf="!startDayIsEndDay(item);"
                   (click)="eventClick.emit(item)"
                   [ngClass]="{
                 'border border-light': theme == 'night',
                 'border border-dark': theme == 'dark' || theme == 'light'
                 }"
                   [ngStyle]="{
                 'background-color': getItemColor(item),
                 'color': getTextColor(getItemColor(item)),
                 'width': '999%'
                 }"
              >
                &nbsp;
              </div>
            </ng-template>
          </div>
        </div>
        <!--        DAYS OF NEXT MONTH-->
        <div *ngFor="let afterday of daysOfNextMonth()"
             class="border text-start w-14 vh-15 lg crop lgOnHover"
             [ngClass]="{'gOnHover dg border-dg': theme == 'night'}"
             (click)="emitDayClickAfterDays(afterday.getDate())">
          <div class="ms-2 user-select-none">
            {{getNumbersInRightLang(afterday.getDate())}}
          </div>
          <div *ngFor="let item of rightEvents(afterday.getDate(), afterday.getMonth())">
            <!--            EVENT START-->
            <div class="ms-1 crop rounded m-1 pointer"
                 *ngIf="isStartDate(item, afterday.getDate(), month + 1); else isEnd"
                 (click)="eventClick.emit(item)"
                 [ngClass]="{
                 'border border-light': theme == 'night',
                 'border border-dark': theme == 'dark' || theme == 'light',
                 'max-width': item.startDate != item.endDate && !item.allDayItem
                 }"
                 [ngStyle]="{
                 'background-color': getItemColor(item),
                 'color': getTextColor(getItemColor(item))
                 }"
            >
              <div class="ms-2">
                {{item.title}}
              </div>
            </div>
            <!--            EVENT ENDING-->
            <ng-template #isEnd>
              <div class="crop rounded m-1 pointer ml-n10"
                   *ngIf="isEndDate(item, afterday.getDate(), afterday.getMonth()); else isNot"
                   (click)="eventClick.emit(item)"
                   [ngClass]="{
                 'border border-light': theme == 'night',
                 'border border-dark': theme == 'dark' || theme == 'light'
                 }"
                   [ngStyle]="{
                 'background-color': getItemColor(item),
                 'color': getTextColor(getItemColor(item))
                 }"
              >
                &nbsp;
              </div>
            </ng-template>
            <!--EVENT MIDDLE-->
            <ng-template #isNot>
              <div class="crop rounded m-1 pointer mx-n10"
                   *ngIf="!startDayIsEndDay(item);"
                   (click)="eventClick.emit(item)"
                   [ngClass]="{
                 'border border-light': theme == 'night',
                 'border border-dark': theme == 'dark' || theme == 'light'
                 }"
                   [ngStyle]="{
                 'background-color': getItemColor(item),
                 'color': getTextColor(getItemColor(item)),
                 'width': '999%'
                 }"
              >
                &nbsp;
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>

    <!--WOCHENANSICHT-->
    <div *ngIf="initialView == 'week'">
      <div class="justify-content-center">
        <div class="border border-light">
          <div class="row text-center" [ngClass]="{'bg-dark': theme == 'dark', 'bg-light': theme == 'light'}">
            <div *ngFor="let weekdayName of localeValue.weekdays" class="user-select-none w-14">
              <h5 [ngClass]="{'lg': theme == 'dark' || theme == 'night'}">
                {{weekdayName}}
              </h5>
            </div>
          </div>
        </div>
        <div class="row mx-0">
          <div *ngFor="let day of daysOfWeek()"
               class="w-14 border border-grey week-height crop lgOnHover"
               [ngClass]="{'gOnHover': theme == 'night'}"
               [ngStyle]="{'background-color': colorOfTheDay(day.getDate(), day.getMonth())}">
            <div *ngFor="let item of rightEvents(day.getDate(), day.getMonth())">
              <div class="m-1">
                <!--            EVENT START-->
                <div class="ms-1 crop rounded m-1 pointer"
                     *ngIf="isStartDate(item, day.getDate(), day.getMonth()); else isEnd"
                     (click)="eventClick.emit(item)"
                     [ngClass]="{
                 'border border-light': theme == 'night',
                 'border border-dark': theme == 'dark' || theme == 'light',
                 'max-width': item.startDate != item.endDate && !item.allDayItem
                 }"
                     [ngStyle]="{
                 'background-color': getItemColor(item),
                 'color': getTextColor(getItemColor(item))
                 }"
                >
                  <div class="text-start ms-2">
                    {{item.title}}
                  </div>
                </div>
                <!--            EVENT ENDING-->
                <ng-template #isEnd>
                  <div class="crop rounded-end m-1 pointer ml-n10"
                       *ngIf="isEndDate(item, day.getDate(), day.getMonth()); else isNot"
                       (click)="eventClick.emit(item)"
                       [ngClass]="{
                 'border border-light': theme == 'night',
                 'border border-dark': theme == 'dark' || theme == 'light'
                 }"
                       [ngStyle]="{
                 'background-color': getItemColor(item),
                 'color': getTextColor(getItemColor(item))
                 }"
                  >
                    &nbsp;
                  </div>
                </ng-template>
                <!--EVENT MIDDLE-->
                <ng-template #isNot>
                  <div class="crop m-1 pointer mx-n10"
                       *ngIf="!startDayIsEndDay(item);"
                       (click)="eventClick.emit(item)"
                       [ngClass]="{
                 'border border-light': theme == 'night',
                 'border border-dark': theme == 'dark' || theme == 'light'
                 }"
                       [ngStyle]="{
                 'background-color': getItemColor(item),
                 'color': getTextColor(getItemColor(item)),
                 'width': '999%'
                 }"
                  >
                    &nbsp;
                  </div>
                </ng-template>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--TAGESANSICHT-->
    <div *ngIf="initialView == 'day'">
      <div class="row justify-content-center">
        <div class="w-100">
          <div class="row">
            <div class="border border-grey w-14 min-height"
                 [ngClass]="{'bg-dark': theme == 'dark', 'bg-light': theme == 'light'}">
              <div class="user-select-none" [ngClass]="{'lg': theme == 'dark' || theme == 'night'}">
                {{localeValue.others[5]}}
              </div>
            </div>
            <div class="w-85">
              <div class="border border-grey min-height px-0 mx-0">
                <div *ngFor="let item of events">
                  <div *ngIf="isAllDayItem(item) && correctDate(item, day-1)">
                    <div class="justify-content-center">
                      <div class="rounded w-100 border border-dark crop pointer mb-05" (click)="eventClick.emit(item)"
                           [ngStyle]="{'background-color': getItemColor(item), 'color': getTextColor(getItemColor(item))}">
                        {{item.title}}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="h-2px"></div>
          <div *ngFor="let counter of numSequence(24); let hours = index; ">
            <div class="row">
              <div class="border border-grey w-14 h-50px"
                   [ngClass]="{'bg-dark': theme == 'dark', 'bg-light': theme == 'light'}">
                <div class="user-select-none" [ngClass]="{'lg': theme == 'dark' || theme == 'night'}">
                  {{getHoursOfDay(hours)}}
                </div>
              </div>
              <div class="w-85">
                <div class="border border-grey h-50"></div>
                <div class="border border-grey h-50"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  <div class="container h-50px"></div>
</div>
